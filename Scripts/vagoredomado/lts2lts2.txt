#!/bin/bash

# Script para actualizar Lubuntu 20.04 a 24.04
# Asegúrate de ejecutarlo como superusuario: sudo ./upgrade_lubuntu.sh

echo "=== Inicio del proceso de actualización de Lubuntu ==="

# 1. Actualizar los paquetes actuales
echo "Paso 1: Actualizando paquetes actuales..."
sudo apt update && sudo apt upgrade -y && sudo apt dist-upgrade -y

# 2. Limpiar paquetes innecesarios
echo "Paso 2: Limpiando paquetes y configuraciones antiguas..."
sudo apt autoremove --purge -y
sudo apt clean

# 3. Asegurarse de que update-manager-core está instalado
echo "Paso 3: Instalando update-manager-core si no está presente..."
sudo apt install update-manager-core -y

# 4. Configurar el archivo de actualizaciones para permitir LTS
echo "Paso 4: Configurando /etc/update-manager/release-upgrades..."
sudo sed -i 's/^Prompt=.*/Prompt=lts/' /etc/update-manager/release-upgrades

# 5. Iniciar la actualización
echo "Paso 5: Iniciando la actualización a Lubuntu 24.04..."
sudo do-release-upgrade -d

# 6. Verificar el resultado
if [ $? -eq 0 ]; then
    echo "La actualización se completó correctamente. Por favor, reinicia el sistema."
else
    echo "Hubo un problema durante la actualización. Revisa los mensajes de error."
fi

echo "=== Fin del proceso de actualización ==="

